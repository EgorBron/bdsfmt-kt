---
created: 2022-06-16T16:38:23.109868
author: "TheSingularity"
documentTitle: "SyrDB Protocol 0.2"
lang: ru-RU
---

# **1.** Протокол SyrDB 0.2.
## **1.1.** Описание.
Протокол SyrDB 0.2 или же **SG/SDB:P@0.2**`¹` является бинарным. К слову SyrDB 0.0.2 (**SG/SDB:SDB@0.0.2**`²`) хранит всё в **BSON**`³`.

## **1.2.** Примичание.
Здесь будут использоваться такие обозначения как:
> **S** - Server (рус. *Сервер*)<br>
> **C** - Client (рус. *Клиент*)

# **2.** Request (рус. *Запрос*).
## **2.1.** `UTF-8` представление (~как в HTTP/1.1).
```py
SyrDB/0.2 <operationСode>
<headerName>: <headerValue>
...

<content>
```
**Значения:**
- **operationСode** (рус. *Код операции*) - это цифровое обозначение операции.
- **headerName** (рус. *Название заголовка*) - это название заголовка.
- **headerValue** (рус. *Значение заголовка*) - это значение заголовка.
- **content** (рус. *Содержимое*) - это содержимое запроса.

## **2.2.** Бинарное представление.
Здесь будет описан бинарный шаблон запроса.
```py
Request {
    Headers Length (32),
    Content Length (32),
    Flags Length (32),

    OP (2),
    Request ID (30),

    Headers (?),
    Content (?),
    Flags (?)
}
```
**Значения:**
- **Длины**
    + **Headers Length** (`Число`) - Длина заголовков
    + **Content Length** (`Число`) - Длина содержимого
    + **Flags Length** (`Число`) - Длина флагов
- **Информация о запросе**
    + **OP** (`Группированое число`) - Код операции (см. *5.1.*)
    + **Request ID** (`Число`) - ID запроса
- **Содержимое**
    + **Headers** (`Заголовки`) - Заголовки запроса
    + **Content** (`Содержимое`) - Содержимое запроса
    + **Flags** (`Список`[`Флаг`]) - Флаги запроса

# **3.** Response (рус. *Ответ*)
## **3.1.** `UTF-8` представление (~как в HTTP/1.1).
```py
SyrDB/0.2 <statusCode>
<headerName>: <headerValue>
...

<content>
```
**Значения:**
- **statusCode** (рус. *Код статуса*) - это цифровое обозначение кода статуса.
- **headerName** (рус. *Название заголовка*) - это название заголовка.
- **headerValue** (рус. *Значение заголовка*) - это значение заголовка.
- **content** (рус. *Содержимое*) - это содержимое запроса.

## **3.2.** Бинарное представление
Здесь будет описан бинарный шаблон ответа
```py
Response {
    Headers Length (32),
    Content Length (32),
    Flags Length (32),

    Status Code (2),

    Headers (?),
    Content (?),
    Flags (?)
}
```
**Значения:**
- **Длины**
    + **Headers Length** (`Число`) - Длина заголовков
    + **Content Length** (`Число`) - Длина содержимого
    + **Flags Length** (`Число`) - Длина флагов
- **Информация о запросе**
    + **Status Code** (`Группированое число`) - Код статуса (см. *5.2.*)
- **Содержимое**
    + **Headers** (`Заголовки`) - Заголовки запроса
    + **Content** (`Содержимое`) - Содержимое запроса
    + **Flags** (`Список`[`Флаг`]) - Флаги запроса

# **4.** Типы
## **4.1.** Число
Значения числового типа имеют ограничение: `-1<N<2²⁵⁶-1`, где `N` = данному значению.

**Примеры (`Python`)**
> **Код:**
```py
# Encoding (рус. Шифровка)
number = 37285
bytelist = number.to_bytes(32, 'big')
print(bytelist)

# Decoding (рус. Расшифровка)
bytelist = b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\xd5' # 213
number = int.from_bytes(bytelist, 'big')
print(number)
```
> **Результат:**
```py
b'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x91\xa5' # Это результат шифровки
213 # Это результат расшифровки
```

# **6.** Словарь.
`¹` - SyrGroup SyrDB Protocol 0.2<br>
`²` - SyrGroup SyrDB 0.0.2<br>
`³` - [Binary JavaScript Object Notation](https://ru.wikipedia.org/wiki/BSON)